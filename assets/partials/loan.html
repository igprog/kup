<div ng-controller="loanCtrl">
    <div class="col-sm-6">
        <form>
            <div class="form-group">
                <label for="accessDate">Datum:</label>
                <input ng-model="d.date" type="date" class="form-control" name="accessDate">
            </div>
            <hr />
            <div class="form-group">
                <label for="userId">Korisnik:</label>
                <select ng-model="d.loan.user.id" class="form-control" name="userId" ng-click="getUser(d.loan.user.id)">
                    <option ng-repeat="x in d.users" value="{{x.id}}">{{x.id}} - {{x.firstName}} {{x.lastName}}</option>
                </select>
            </div>
            <div>
                <label for="restToRepayment">Dug: {{d.user.restToRepayment | number:2}} kn</label>
                <!--<div ng-if="config.debug">{{d.user.activeLoanId}}</div>-->
            </div>
            <hr />
            <div class="form-group">
                <label for="loan">Iznos pozajmice:</label>
                <input ng-model="d.loan.loan" type="text" class="form-control" name="loan" ng-change="calculate(d.loan)" allow-only-numbers>
            </div>
            <div class="form-group">
                <label for="dedline">Rok otplate (mj):</label>
                <input ng-model="d.loan.dedline" type="text" class="form-control" name="dedline" ng-change="calculate(d.loan)" allow-only-numbers>
            </div>
            <div class="form-group">
                <label for="repayment">Mjesečna rata:</label>
                <input ng-model="d.loan.repayment" type="text" class="form-control" name="repayment" ng-change="calculateDedline(d.loan)" allow-only-numbers>
            </div>
            <div class="form-group">
                <label for="manipulativeCosts">Manipulativni troškovi ({{d.loan.manipulativeCostsCoeff * 100}}%):</label>
                <input ng-model="d.loan.manipulativeCosts" type="text" class="form-control" name="manipulativeCosts" ng-change="calculate(d.loan)" allow-only-numbers>
            </div>
            <div class="form-group">
                <label for="actualLoan">Pozajmica:</label>
                <input ng-model="d.loan.actualLoan" type="text" class="form-control" name="actualLoan" ng-change="calculate(d.loan)" allow-only-numbers>
            </div>
            <div class="form-group">
                <label for="withdraw">Za isplatu:</label>
                <input ng-model="d.loan.withdraw" type="text" class="form-control" name="withdraw" ng-change="calculate(d.loan)" allow-only-numbers>
            </div>
            <div class="text-right">
                <button type="submit" class="btn btn-outline-primary" ng-click="save(d, d.date)"><i class="fas fa-save"></i> Spremi</button>
            </div>
        </form>
    </div>
    <pre ng-if="config.debug">{{d.loan | json}}</pre>
</div>
